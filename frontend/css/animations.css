/* ═══════════════════════════════════════════════════════════
   MCAT Mastery — Animations & VFX
   Satisfying micro-animations for ADHD-first design.
   ═══════════════════════════════════════════════════════════ */

/* ─── Tile Pulse (available tile) ──────────────────────── */
@keyframes tilePulse {
    0%, 100% { box-shadow: 0 0 0 0 rgba(88, 166, 255, 0.3); }
    50%      { box-shadow: 0 0 12px 4px rgba(88, 166, 255, 0.15); }
}

/* ─── Fog Clear (tile cleared) ─────────────────────────── */
@keyframes fogClear {
    0%   { filter: blur(3px) saturate(0.2); opacity: 0.5; }
    50%  { filter: blur(1px) saturate(0.6); opacity: 0.8; transform: scale(1.05); }
    100% { filter: blur(0) saturate(1); opacity: 1; transform: scale(1); }
}

.tile.just-cleared {
    animation: fogClear 0.8s ease-out forwards;
}

/* ─── Resonance Strike (correct answer) ────────────────── */
@keyframes resonanceStrike {
    0%   { transform: scale(0.8); opacity: 0; }
    30%  { transform: scale(1.3); opacity: 1; }
    100% { transform: scale(1); opacity: 0; }
}

.resonance-vfx {
    position: fixed;
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: radial-gradient(circle, var(--element-glow, var(--crystal)) 0%, transparent 70%);
    pointer-events: none;
    z-index: 900;
    animation: resonanceStrike 0.6s ease-out forwards;
}

/* ─── Streak Fire Glow ─────────────────────────────────── */
@keyframes streakGlow {
    0%, 100% { text-shadow: 0 0 4px rgba(255, 107, 53, 0.3); }
    50%      { text-shadow: 0 0 12px rgba(255, 107, 53, 0.6); }
}

.mission-streak.hot .streak-icon {
    animation: streakGlow 1s infinite;
}

/* ─── Crystal Pop (earned crystals) ────────────────────── */
@keyframes crystalPop {
    0%   { transform: scale(0) translateY(0); opacity: 0; }
    50%  { transform: scale(1.3) translateY(-20px); opacity: 1; }
    100% { transform: scale(1) translateY(-40px); opacity: 0; }
}

.crystal-popup {
    position: fixed;
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--crystal);
    pointer-events: none;
    z-index: 900;
    animation: crystalPop 1s ease-out forwards;
}

/* ─── XP Pop ───────────────────────────────────────────── */
@keyframes xpPop {
    0%   { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(-30px); opacity: 0; }
}

.xp-popup {
    position: absolute;
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--health-green);
    pointer-events: none;
    animation: xpPop 0.8s ease-out forwards;
}

/* ─── Creature Freed ───────────────────────────────────── */
@keyframes creatureFreed {
    0%   { filter: hue-rotate(180deg) saturate(2) brightness(0.6); transform: scale(1); }
    50%  { filter: hue-rotate(0deg) saturate(1.5) brightness(1.2); transform: scale(1.1); }
    100% { filter: hue-rotate(0deg) saturate(1) brightness(1); transform: scale(1); }
}

.creature-freed {
    animation: creatureFreed 1.2s ease-out forwards;
}

/* ─── Grimble Corruption Pulse (wrong answer) ──────────── */
@keyframes corruptionPulse {
    0%   { box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.4); }
    50%  { box-shadow: 0 0 16px 8px rgba(139, 92, 246, 0.2); }
    100% { box-shadow: 0 0 0 0 rgba(139, 92, 246, 0); }
}

.corruption-flash {
    animation: corruptionPulse 0.6s ease-out;
}

/* ─── Screen Transition ────────────────────────────────── */
@keyframes screenFadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to   { opacity: 1; transform: translateY(0); }
}

.screen.active {
    animation: screenFadeIn 0.3s ease-out;
}

/* ─── Slide In (LYRA bubble) ───────────────────────────── */
@keyframes slideInLeft {
    from { opacity: 0; transform: translateX(-16px); }
    to   { opacity: 1; transform: translateX(0); }
}

.lyra-greeting {
    animation: slideInLeft 0.5s ease-out;
}

/* ─── Planet Hover Float ───────────────────────────────── */
@keyframes planetFloat {
    0%, 100% { transform: translateY(0); }
    50%      { transform: translateY(-4px); }
}

.planet-btn:hover .planet-icon {
    animation: planetFloat 1.5s ease-in-out infinite;
}

/* ─── Loading Shimmer ──────────────────────────────────── */
@keyframes shimmer {
    0%   { background-position: -200% 0; }
    100% { background-position: 200% 0; }
}

.loading-bar {
    background: linear-gradient(
        90deg,
        var(--lyra-blue) 0%,
        var(--crystal) 50%,
        var(--lyra-blue) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s linear infinite;
}

/* ─── Button Press Effect ──────────────────────────────── */
@keyframes btnPress {
    0%   { transform: scale(1); }
    50%  { transform: scale(0.95); }
    100% { transform: scale(1); }
}

.btn-primary:active {
    animation: btnPress 0.2s ease;
}

/* ─── Reward Popup Entrance ────────────────────────────── */
@keyframes rewardSlideUp {
    from { opacity: 0; transform: translateY(30px) scale(0.95); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
}

.reward-popup:not(.hidden) .reward-content {
    animation: rewardSlideUp 0.4s ease-out;
}

/* ─── Particle System (CSS-only embers) ────────────────── */
@keyframes particleRise {
    0%   { transform: translateY(0) scale(1); opacity: 1; }
    100% { transform: translateY(-60px) scale(0.3); opacity: 0; }
}

.particle {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--element-color, var(--crystal));
    pointer-events: none;
    animation: particleRise 1s ease-out forwards;
}

/* ─── Reduced Motion ───────────────────────────────────── */
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}
